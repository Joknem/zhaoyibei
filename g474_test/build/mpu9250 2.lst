ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"mpu9250.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "user/Src/mpu9250.c"
  20              		.section	.text.MPU_Write_Len,"ax",%progbits
  21              		.align	1
  22              		.global	MPU_Write_Len
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	MPU_Write_Len:
  28              	.LVL0:
  29              	.LFB142:
   1:user/Src/mpu9250.c **** #include "mpu9250.h"
   2:user/Src/mpu9250.c **** #include "i2c.h"
   3:user/Src/mpu9250.c **** #include "inv_mpu.h"
   4:user/Src/mpu9250.c **** #include "inv_mpu_dmp_motion_driver.h"
   5:user/Src/mpu9250.c **** #include "main.h"
   6:user/Src/mpu9250.c **** #include "stdio.h"
   7:user/Src/mpu9250.c **** 
   8:user/Src/mpu9250.c **** // 初始化MPU9250
   9:user/Src/mpu9250.c **** // 返回值:0,成功
  10:user/Src/mpu9250.c **** //     其他,错误代码
  11:user/Src/mpu9250.c **** u8 MPU9250_Init(void) {
  12:user/Src/mpu9250.c ****   u8 res = 0;
  13:user/Src/mpu9250.c ****   // IIC_Init();     //初始化IIC总线
  14:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_PWR_MGMT1_REG, 0X80); // 复位MPU9250
  15:user/Src/mpu9250.c ****   HAL_Delay(100);                                        // 延时100ms
  16:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_PWR_MGMT1_REG, 0X00); // 唤醒MPU9250
  17:user/Src/mpu9250.c ****   MPU_Set_Gyro_Fsr(3);  // 陀螺仪传感器,±2000dps
  18:user/Src/mpu9250.c ****   MPU_Set_Accel_Fsr(0); // 加速度传感器,±2g
  19:user/Src/mpu9250.c ****   MPU_Set_Rate(50);     // 设置采样率50Hz
  20:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_INT_EN_REG, 0X00);    // 关闭所有中断
  21:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_USER_CTRL_REG, 0X00); // I2C主模式关闭
  22:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_FIFO_EN_REG, 0X00);   // 关闭FIFO
  23:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_INTBP_CFG_REG,
  24:user/Src/mpu9250.c ****                  0X82); // INT引脚低电平有效，开启bypass模式，可以直接读取磁力
  25:user/Src/mpu9250.c ****   res = MPU_Read_Byte(MPU9250_ADDR, MPU_DEVICE_ID_REG); // 读取MPU6500的ID
  26:user/Src/mpu9250.c ****   if (res == MPU6500_ID)                                // 器件ID正确
  27:user/Src/mpu9250.c ****   {
  28:user/Src/mpu9250.c ****     MPU_Write_Byte(MPU9250_ADDR, MPU_PWR_MGMT1_REG,
  29:user/Src/mpu9250.c ****                    0X01); // 设置CLKSEL,PLL X轴为参考
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 2


  30:user/Src/mpu9250.c ****     MPU_Write_Byte(MPU9250_ADDR, MPU_PWR_MGMT2_REG,
  31:user/Src/mpu9250.c ****                    0X00); // 加速度与陀螺仪都工作
  32:user/Src/mpu9250.c ****     MPU_Set_Rate(50);     // 设置采样率为50Hz
  33:user/Src/mpu9250.c ****   } else
  34:user/Src/mpu9250.c ****     return 1;
  35:user/Src/mpu9250.c **** 
  36:user/Src/mpu9250.c ****   res = MPU_Read_Byte(AK8963_ADDR, MAG_WIA); // 读取AK8963 ID
  37:user/Src/mpu9250.c ****   if (res == AK8963_ID) {
  38:user/Src/mpu9250.c ****     MPU_Write_Byte(AK8963_ADDR, MAG_CNTL1, 0X11); // 设置AK8963为单次测量模式
  39:user/Src/mpu9250.c ****   } else
  40:user/Src/mpu9250.c ****     return 1;
  41:user/Src/mpu9250.c **** 
  42:user/Src/mpu9250.c ****   return 0;
  43:user/Src/mpu9250.c **** }
  44:user/Src/mpu9250.c **** 
  45:user/Src/mpu9250.c **** // 设置MPU9250陀螺仪传感器满量程范围
  46:user/Src/mpu9250.c **** // fsr:0,±250dps;1,±500dps;2,±1000dps;3,±2000dps
  47:user/Src/mpu9250.c **** // 返回值:0,设置成功
  48:user/Src/mpu9250.c **** //     其他,设置失败
  49:user/Src/mpu9250.c **** u8 MPU_Set_Gyro_Fsr(u8 fsr) {
  50:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_GYRO_CFG_REG,
  51:user/Src/mpu9250.c ****                         fsr << 3); // 设置陀螺仪满量程范围
  52:user/Src/mpu9250.c **** }
  53:user/Src/mpu9250.c **** // 设置MPU9250加速度传感器满量程范围
  54:user/Src/mpu9250.c **** // fsr:0,±2g;1,±4g;2,±8g;3,±16g
  55:user/Src/mpu9250.c **** // 返回值:0,设置成功
  56:user/Src/mpu9250.c **** //     其他,设置失败
  57:user/Src/mpu9250.c **** u8 MPU_Set_Accel_Fsr(u8 fsr) {
  58:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_ACCEL_CFG_REG,
  59:user/Src/mpu9250.c ****                         fsr << 3); // 设置加速度传感器满量程范围
  60:user/Src/mpu9250.c **** }
  61:user/Src/mpu9250.c **** 
  62:user/Src/mpu9250.c **** // 设置MPU9250的数字低通滤波器
  63:user/Src/mpu9250.c **** // lpf:数字低通滤波频率(Hz)
  64:user/Src/mpu9250.c **** // 返回值:0,设置成功
  65:user/Src/mpu9250.c **** //     其他,设置失败
  66:user/Src/mpu9250.c **** u8 MPU_Set_LPF(u16 lpf) {
  67:user/Src/mpu9250.c ****   u8 data = 0;
  68:user/Src/mpu9250.c ****   if (lpf >= 188)
  69:user/Src/mpu9250.c ****     data = 1;
  70:user/Src/mpu9250.c ****   else if (lpf >= 98)
  71:user/Src/mpu9250.c ****     data = 2;
  72:user/Src/mpu9250.c ****   else if (lpf >= 42)
  73:user/Src/mpu9250.c ****     data = 3;
  74:user/Src/mpu9250.c ****   else if (lpf >= 20)
  75:user/Src/mpu9250.c ****     data = 4;
  76:user/Src/mpu9250.c ****   else if (lpf >= 10)
  77:user/Src/mpu9250.c ****     data = 5;
  78:user/Src/mpu9250.c ****   else
  79:user/Src/mpu9250.c ****     data = 6;
  80:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_CFG_REG, data); // 设置数字低通滤波器
  81:user/Src/mpu9250.c **** }
  82:user/Src/mpu9250.c **** 
  83:user/Src/mpu9250.c **** // 设置MPU9250的采样率(假定Fs=1KHz)
  84:user/Src/mpu9250.c **** // rate:4~1000(Hz)
  85:user/Src/mpu9250.c **** // 返回值:0,设置成功
  86:user/Src/mpu9250.c **** //     其他,设置失败
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 3


  87:user/Src/mpu9250.c **** u8 MPU_Set_Rate(u16 rate) {
  88:user/Src/mpu9250.c ****   u8 data;
  89:user/Src/mpu9250.c ****   if (rate > 1000)
  90:user/Src/mpu9250.c ****     rate = 1000;
  91:user/Src/mpu9250.c ****   if (rate < 4)
  92:user/Src/mpu9250.c ****     rate = 4;
  93:user/Src/mpu9250.c ****   data = 1000 / rate - 1;
  94:user/Src/mpu9250.c ****   data = MPU_Write_Byte(MPU9250_ADDR, MPU_SAMPLE_RATE_REG,
  95:user/Src/mpu9250.c ****                         data);  // 设置数字低通滤波器
  96:user/Src/mpu9250.c ****   return MPU_Set_LPF(rate / 2); // 自动设置LPF为采样率的一半
  97:user/Src/mpu9250.c **** }
  98:user/Src/mpu9250.c **** 
  99:user/Src/mpu9250.c **** // 得到温度值
 100:user/Src/mpu9250.c **** // 返回值:温度值(扩大了100倍)
 101:user/Src/mpu9250.c **** short MPU_Get_Temperature(void) {
 102:user/Src/mpu9250.c ****   u8 buf[2];
 103:user/Src/mpu9250.c ****   short raw;
 104:user/Src/mpu9250.c ****   float temp;
 105:user/Src/mpu9250.c ****   MPU_Read_Len(MPU9250_ADDR, MPU_TEMP_OUTH_REG, 2, buf);
 106:user/Src/mpu9250.c ****   raw = ((u16)buf[0] << 8) | buf[1];
 107:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 108:user/Src/mpu9250.c ****   return temp * 100;
 109:user/Src/mpu9250.c ****   ;
 110:user/Src/mpu9250.c **** }
 111:user/Src/mpu9250.c **** // 得到陀螺仪值(原始值)
 112:user/Src/mpu9250.c **** // gx,gy,gz:陀螺仪x,y,z轴的原始读数(带符号)
 113:user/Src/mpu9250.c **** // 返回值:0,成功
 114:user/Src/mpu9250.c **** //     其他,错误代码
 115:user/Src/mpu9250.c **** u8 MPU_Get_Gyroscope(short *gx, short *gy, short *gz) {
 116:user/Src/mpu9250.c ****   u8 buf[6], res;
 117:user/Src/mpu9250.c ****   res = MPU_Read_Len(MPU9250_ADDR, MPU_GYRO_XOUTH_REG, 6, buf);
 118:user/Src/mpu9250.c ****   if (res == 0) {
 119:user/Src/mpu9250.c ****     *gx = ((u16)buf[0] << 8) | buf[1];
 120:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 121:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 122:user/Src/mpu9250.c ****   }
 123:user/Src/mpu9250.c ****   return res;
 124:user/Src/mpu9250.c ****   ;
 125:user/Src/mpu9250.c **** }
 126:user/Src/mpu9250.c **** // 得到加速度值(原始值)
 127:user/Src/mpu9250.c **** // gx,gy,gz:陀螺仪x,y,z轴的原始读数(带符号)
 128:user/Src/mpu9250.c **** // 返回值:0,成功
 129:user/Src/mpu9250.c **** //     其他,错误代码
 130:user/Src/mpu9250.c **** u8 MPU_Get_Accelerometer(short *ax, short *ay, short *az) {
 131:user/Src/mpu9250.c ****   u8 buf[6], res;
 132:user/Src/mpu9250.c ****   res = MPU_Read_Len(MPU9250_ADDR, MPU_ACCEL_XOUTH_REG, 6, buf);
 133:user/Src/mpu9250.c ****   if (res == 0) {
 134:user/Src/mpu9250.c ****     *ax = ((u16)buf[0] << 8) | buf[1];
 135:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 136:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 137:user/Src/mpu9250.c ****   }
 138:user/Src/mpu9250.c ****   return res;
 139:user/Src/mpu9250.c ****   ;
 140:user/Src/mpu9250.c **** }
 141:user/Src/mpu9250.c **** 
 142:user/Src/mpu9250.c **** // 得到磁力计值(原始值)
 143:user/Src/mpu9250.c **** // mx,my,mz:磁力计x,y,z轴的原始读数(带符号)
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 4


 144:user/Src/mpu9250.c **** // 返回值:0,成功
 145:user/Src/mpu9250.c **** //     其他,错误代码
 146:user/Src/mpu9250.c **** u8 MPU_Get_Magnetometer(short *mx, short *my, short *mz) {
 147:user/Src/mpu9250.c ****   u8 buf[6], res;
 148:user/Src/mpu9250.c ****   res = MPU_Read_Len(AK8963_ADDR, MAG_XOUT_L, 6, buf);
 149:user/Src/mpu9250.c ****   if (res == 0) {
 150:user/Src/mpu9250.c ****     *mx = ((u16)buf[1] << 8) | buf[0];
 151:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 152:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 153:user/Src/mpu9250.c ****   }
 154:user/Src/mpu9250.c ****   MPU_Write_Byte(AK8963_ADDR, MAG_CNTL1,
 155:user/Src/mpu9250.c ****                  0X11); // AK8963每次读完以后都需要重新设置为单次测量模式
 156:user/Src/mpu9250.c ****   return res;
 157:user/Src/mpu9250.c ****   ;
 158:user/Src/mpu9250.c **** }
 159:user/Src/mpu9250.c **** 
 160:user/Src/mpu9250.c **** // IIC连续写
 161:user/Src/mpu9250.c **** // addr:器件地址
 162:user/Src/mpu9250.c **** // reg:寄存器地址
 163:user/Src/mpu9250.c **** // len:写入长度
 164:user/Src/mpu9250.c **** // buf:数据区
 165:user/Src/mpu9250.c **** // 返回值:0,正常
 166:user/Src/mpu9250.c **** //     其他,错误代码
 167:user/Src/mpu9250.c **** u8 MPU_Write_Len(u8 addr, u8 reg, u8 len, u8 *buf) {
  30              		.loc 1 167 52 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 167 52 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 84B0     		sub	sp, sp, #16
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 24
 168:user/Src/mpu9250.c ****   HAL_I2C_Mem_Write(&hi2c1, (addr << 1), reg, I2C_MEMADD_SIZE_8BIT, buf, len,
  43              		.loc 1 168 3 is_stmt 1 view .LVU2
  44 0004 40F6FF74 		movw	r4, #4095
  45 0008 0294     		str	r4, [sp, #8]
  46 000a 0192     		str	r2, [sp, #4]
  47 000c 0093     		str	r3, [sp]
  48 000e 0123     		movs	r3, #1
  49              	.LVL1:
  50              		.loc 1 168 3 is_stmt 0 view .LVU3
  51 0010 0A46     		mov	r2, r1
  52              	.LVL2:
  53              		.loc 1 168 3 view .LVU4
  54 0012 00FA03F1 		lsl	r1, r0, r3
  55              	.LVL3:
  56              		.loc 1 168 3 view .LVU5
  57 0016 0348     		ldr	r0, .L3
  58              	.LVL4:
  59              		.loc 1 168 3 view .LVU6
  60 0018 FFF7FEFF 		bl	HAL_I2C_Mem_Write
  61              	.LVL5:
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 5


 169:user/Src/mpu9250.c ****                     0xfff);
 170:user/Src/mpu9250.c ****   return 0;
  62              		.loc 1 170 3 is_stmt 1 view .LVU7
 171:user/Src/mpu9250.c **** }
  63              		.loc 1 171 1 is_stmt 0 view .LVU8
  64 001c 0020     		movs	r0, #0
  65 001e 04B0     		add	sp, sp, #16
  66              	.LCFI2:
  67              		.cfi_def_cfa_offset 8
  68              		@ sp needed
  69 0020 10BD     		pop	{r4, pc}
  70              	.L4:
  71 0022 00BF     		.align	2
  72              	.L3:
  73 0024 00000000 		.word	hi2c1
  74              		.cfi_endproc
  75              	.LFE142:
  77              		.section	.text.MPU_Read_Len,"ax",%progbits
  78              		.align	1
  79              		.global	MPU_Read_Len
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  84              	MPU_Read_Len:
  85              	.LVL6:
  86              	.LFB143:
 172:user/Src/mpu9250.c **** 
 173:user/Src/mpu9250.c **** // IIC连续读
 174:user/Src/mpu9250.c **** // addr:器件地址
 175:user/Src/mpu9250.c **** // reg:要读取的寄存器地址
 176:user/Src/mpu9250.c **** // len:要读取的长度
 177:user/Src/mpu9250.c **** // buf:读取到的数据存储区
 178:user/Src/mpu9250.c **** // 返回值:0,正常
 179:user/Src/mpu9250.c **** //     其他,错误代码
 180:user/Src/mpu9250.c **** u8 MPU_Read_Len(u8 addr, u8 reg, u8 len, u8 *buf) {
  87              		.loc 1 180 51 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		.loc 1 180 51 is_stmt 0 view .LVU10
  92 0000 10B5     		push	{r4, lr}
  93              	.LCFI3:
  94              		.cfi_def_cfa_offset 8
  95              		.cfi_offset 4, -8
  96              		.cfi_offset 14, -4
  97 0002 84B0     		sub	sp, sp, #16
  98              	.LCFI4:
  99              		.cfi_def_cfa_offset 24
 181:user/Src/mpu9250.c ****   HAL_I2C_Mem_Read(&hi2c1, (addr << 1), reg, I2C_MEMADD_SIZE_8BIT, buf, len,
 100              		.loc 1 181 3 is_stmt 1 view .LVU11
 101 0004 40F6FF74 		movw	r4, #4095
 102 0008 0294     		str	r4, [sp, #8]
 103 000a 0192     		str	r2, [sp, #4]
 104 000c 0093     		str	r3, [sp]
 105 000e 0123     		movs	r3, #1
 106              	.LVL7:
 107              		.loc 1 181 3 is_stmt 0 view .LVU12
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 6


 108 0010 0A46     		mov	r2, r1
 109              	.LVL8:
 110              		.loc 1 181 3 view .LVU13
 111 0012 00FA03F1 		lsl	r1, r0, r3
 112              	.LVL9:
 113              		.loc 1 181 3 view .LVU14
 114 0016 0348     		ldr	r0, .L7
 115              	.LVL10:
 116              		.loc 1 181 3 view .LVU15
 117 0018 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 118              	.LVL11:
 182:user/Src/mpu9250.c ****                   0xfff);
 183:user/Src/mpu9250.c ****   return 0;
 119              		.loc 1 183 3 is_stmt 1 view .LVU16
 184:user/Src/mpu9250.c **** }
 120              		.loc 1 184 1 is_stmt 0 view .LVU17
 121 001c 0020     		movs	r0, #0
 122 001e 04B0     		add	sp, sp, #16
 123              	.LCFI5:
 124              		.cfi_def_cfa_offset 8
 125              		@ sp needed
 126 0020 10BD     		pop	{r4, pc}
 127              	.L8:
 128 0022 00BF     		.align	2
 129              	.L7:
 130 0024 00000000 		.word	hi2c1
 131              		.cfi_endproc
 132              	.LFE143:
 134              		.global	__aeabi_i2d
 135              		.global	__aeabi_ddiv
 136              		.global	__aeabi_dadd
 137              		.global	__aeabi_d2f
 138              		.section	.text.MPU_Get_Temperature,"ax",%progbits
 139              		.align	1
 140              		.global	MPU_Get_Temperature
 141              		.syntax unified
 142              		.thumb
 143              		.thumb_func
 145              	MPU_Get_Temperature:
 146              	.LFB138:
 101:user/Src/mpu9250.c ****   u8 buf[2];
 147              		.loc 1 101 33 is_stmt 1 view -0
 148              		.cfi_startproc
 149              		@ args = 0, pretend = 0, frame = 8
 150              		@ frame_needed = 0, uses_anonymous_args = 0
 151 0000 00B5     		push	{lr}
 152              	.LCFI6:
 153              		.cfi_def_cfa_offset 4
 154              		.cfi_offset 14, -4
 155 0002 83B0     		sub	sp, sp, #12
 156              	.LCFI7:
 157              		.cfi_def_cfa_offset 16
 102:user/Src/mpu9250.c ****   short raw;
 158              		.loc 1 102 3 view .LVU19
 103:user/Src/mpu9250.c ****   float temp;
 159              		.loc 1 103 3 view .LVU20
 104:user/Src/mpu9250.c ****   MPU_Read_Len(MPU9250_ADDR, MPU_TEMP_OUTH_REG, 2, buf);
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 7


 160              		.loc 1 104 3 view .LVU21
 105:user/Src/mpu9250.c ****   raw = ((u16)buf[0] << 8) | buf[1];
 161              		.loc 1 105 3 view .LVU22
 162 0004 01AB     		add	r3, sp, #4
 163 0006 0222     		movs	r2, #2
 164 0008 4121     		movs	r1, #65
 165 000a 6820     		movs	r0, #104
 166 000c FFF7FEFF 		bl	MPU_Read_Len
 167              	.LVL12:
 106:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 168              		.loc 1 106 3 view .LVU23
 106:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 169              		.loc 1 106 18 is_stmt 0 view .LVU24
 170 0010 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 106:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 171              		.loc 1 106 22 view .LVU25
 172 0014 1B02     		lsls	r3, r3, #8
 106:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 173              		.loc 1 106 28 view .LVU26
 174 0016 1BB2     		sxth	r3, r3
 106:user/Src/mpu9250.c ****   temp = 21 + ((double)raw) / 333.87;
 175              		.loc 1 106 33 view .LVU27
 176 0018 9DF80500 		ldrb	r0, [sp, #5]	@ zero_extendqisi2
 177              	.LVL13:
 107:user/Src/mpu9250.c ****   return temp * 100;
 178              		.loc 1 107 3 is_stmt 1 view .LVU28
 107:user/Src/mpu9250.c ****   return temp * 100;
 179              		.loc 1 107 16 is_stmt 0 view .LVU29
 180 001c 1843     		orrs	r0, r0, r3
 181              	.LVL14:
 107:user/Src/mpu9250.c ****   return temp * 100;
 182              		.loc 1 107 16 view .LVU30
 183 001e FFF7FEFF 		bl	__aeabi_i2d
 184              	.LVL15:
 107:user/Src/mpu9250.c ****   return temp * 100;
 185              		.loc 1 107 29 view .LVU31
 186 0022 0FA3     		adr	r3, .L11+8
 187 0024 D3E90023 		ldrd	r2, [r3]
 188 0028 FFF7FEFF 		bl	__aeabi_ddiv
 189              	.LVL16:
 107:user/Src/mpu9250.c ****   return temp * 100;
 190              		.loc 1 107 13 view .LVU32
 191 002c 0022     		movs	r2, #0
 192 002e 0A4B     		ldr	r3, .L11
 193 0030 FFF7FEFF 		bl	__aeabi_dadd
 194              	.LVL17:
 107:user/Src/mpu9250.c ****   return temp * 100;
 195              		.loc 1 107 8 view .LVU33
 196 0034 FFF7FEFF 		bl	__aeabi_d2f
 197              	.LVL18:
 198 0038 07EE900A 		vmov	s15, r0
 199              	.LVL19:
 108:user/Src/mpu9250.c ****   ;
 200              		.loc 1 108 3 is_stmt 1 view .LVU34
 109:user/Src/mpu9250.c **** }
 201              		.loc 1 109 3 view .LVU35
 108:user/Src/mpu9250.c ****   ;
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 8


 202              		.loc 1 108 15 is_stmt 0 view .LVU36
 203 003c 9FED077A 		vldr.32	s14, .L11+4
 204 0040 67EE877A 		vmul.f32	s15, s15, s14
 205 0044 FDEEE77A 		vcvt.s32.f32	s15, s15
 110:user/Src/mpu9250.c **** // 得到陀螺仪值(原始值)
 206              		.loc 1 110 1 view .LVU37
 207 0048 17EE903A 		vmov	r3, s15	@ int
 208 004c 18B2     		sxth	r0, r3
 209              	.LVL20:
 110:user/Src/mpu9250.c **** // 得到陀螺仪值(原始值)
 210              		.loc 1 110 1 view .LVU38
 211 004e 03B0     		add	sp, sp, #12
 212              	.LCFI8:
 213              		.cfi_def_cfa_offset 4
 214              		@ sp needed
 215 0050 5DF804FB 		ldr	pc, [sp], #4
 216              	.L12:
 217 0054 AFF30080 		.align	3
 218              	.L11:
 219 0058 00003540 		.word	1077215232
 220 005c 0000C842 		.word	1120403456
 221 0060 52B81E85 		.word	-2061584302
 222 0064 EBDD7440 		.word	1081400811
 223              		.cfi_endproc
 224              	.LFE138:
 226              		.section	.text.MPU_Get_Gyroscope,"ax",%progbits
 227              		.align	1
 228              		.global	MPU_Get_Gyroscope
 229              		.syntax unified
 230              		.thumb
 231              		.thumb_func
 233              	MPU_Get_Gyroscope:
 234              	.LVL21:
 235              	.LFB139:
 115:user/Src/mpu9250.c ****   u8 buf[6], res;
 236              		.loc 1 115 55 is_stmt 1 view -0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 8
 239              		@ frame_needed = 0, uses_anonymous_args = 0
 115:user/Src/mpu9250.c ****   u8 buf[6], res;
 240              		.loc 1 115 55 is_stmt 0 view .LVU40
 241 0000 70B5     		push	{r4, r5, r6, lr}
 242              	.LCFI9:
 243              		.cfi_def_cfa_offset 16
 244              		.cfi_offset 4, -16
 245              		.cfi_offset 5, -12
 246              		.cfi_offset 6, -8
 247              		.cfi_offset 14, -4
 248 0002 82B0     		sub	sp, sp, #8
 249              	.LCFI10:
 250              		.cfi_def_cfa_offset 24
 251 0004 0646     		mov	r6, r0
 252 0006 0D46     		mov	r5, r1
 253 0008 1446     		mov	r4, r2
 116:user/Src/mpu9250.c ****   res = MPU_Read_Len(MPU9250_ADDR, MPU_GYRO_XOUTH_REG, 6, buf);
 254              		.loc 1 116 3 is_stmt 1 view .LVU41
 117:user/Src/mpu9250.c ****   if (res == 0) {
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 9


 255              		.loc 1 117 3 view .LVU42
 117:user/Src/mpu9250.c ****   if (res == 0) {
 256              		.loc 1 117 9 is_stmt 0 view .LVU43
 257 000a 6B46     		mov	r3, sp
 258 000c 0622     		movs	r2, #6
 259              	.LVL22:
 117:user/Src/mpu9250.c ****   if (res == 0) {
 260              		.loc 1 117 9 view .LVU44
 261 000e 4321     		movs	r1, #67
 262              	.LVL23:
 117:user/Src/mpu9250.c ****   if (res == 0) {
 263              		.loc 1 117 9 view .LVU45
 264 0010 6820     		movs	r0, #104
 265              	.LVL24:
 117:user/Src/mpu9250.c ****   if (res == 0) {
 266              		.loc 1 117 9 view .LVU46
 267 0012 FFF7FEFF 		bl	MPU_Read_Len
 268              	.LVL25:
 118:user/Src/mpu9250.c ****     *gx = ((u16)buf[0] << 8) | buf[1];
 269              		.loc 1 118 3 is_stmt 1 view .LVU47
 118:user/Src/mpu9250.c ****     *gx = ((u16)buf[0] << 8) | buf[1];
 270              		.loc 1 118 6 is_stmt 0 view .LVU48
 271 0016 A0B9     		cbnz	r0, .L14
 119:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 272              		.loc 1 119 5 is_stmt 1 view .LVU49
 119:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 273              		.loc 1 119 20 is_stmt 0 view .LVU50
 274 0018 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 119:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 275              		.loc 1 119 35 view .LVU51
 276 001c 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 119:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 277              		.loc 1 119 30 view .LVU52
 278 0020 43EA0223 		orr	r3, r3, r2, lsl #8
 119:user/Src/mpu9250.c ****     *gy = ((u16)buf[2] << 8) | buf[3];
 279              		.loc 1 119 9 view .LVU53
 280 0024 3380     		strh	r3, [r6]	@ movhi
 120:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 281              		.loc 1 120 5 is_stmt 1 view .LVU54
 120:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 282              		.loc 1 120 20 is_stmt 0 view .LVU55
 283 0026 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 120:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 284              		.loc 1 120 35 view .LVU56
 285 002a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 120:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 286              		.loc 1 120 30 view .LVU57
 287 002e 43EA0223 		orr	r3, r3, r2, lsl #8
 120:user/Src/mpu9250.c ****     *gz = ((u16)buf[4] << 8) | buf[5];
 288              		.loc 1 120 9 view .LVU58
 289 0032 2B80     		strh	r3, [r5]	@ movhi
 121:user/Src/mpu9250.c ****   }
 290              		.loc 1 121 5 is_stmt 1 view .LVU59
 121:user/Src/mpu9250.c ****   }
 291              		.loc 1 121 20 is_stmt 0 view .LVU60
 292 0034 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 121:user/Src/mpu9250.c ****   }
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 10


 293              		.loc 1 121 35 view .LVU61
 294 0038 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 121:user/Src/mpu9250.c ****   }
 295              		.loc 1 121 30 view .LVU62
 296 003c 43EA0223 		orr	r3, r3, r2, lsl #8
 121:user/Src/mpu9250.c ****   }
 297              		.loc 1 121 9 view .LVU63
 298 0040 2380     		strh	r3, [r4]	@ movhi
 299              	.L14:
 123:user/Src/mpu9250.c ****   ;
 300              		.loc 1 123 3 is_stmt 1 view .LVU64
 124:user/Src/mpu9250.c **** }
 301              		.loc 1 124 3 view .LVU65
 125:user/Src/mpu9250.c **** // 得到加速度值(原始值)
 302              		.loc 1 125 1 is_stmt 0 view .LVU66
 303 0042 02B0     		add	sp, sp, #8
 304              	.LCFI11:
 305              		.cfi_def_cfa_offset 16
 306              	.LVL26:
 125:user/Src/mpu9250.c **** // 得到加速度值(原始值)
 307              		.loc 1 125 1 view .LVU67
 308              		@ sp needed
 309 0044 70BD     		pop	{r4, r5, r6, pc}
 125:user/Src/mpu9250.c **** // 得到加速度值(原始值)
 310              		.loc 1 125 1 view .LVU68
 311              		.cfi_endproc
 312              	.LFE139:
 314              		.section	.text.MPU_Get_Accelerometer,"ax",%progbits
 315              		.align	1
 316              		.global	MPU_Get_Accelerometer
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 321              	MPU_Get_Accelerometer:
 322              	.LVL27:
 323              	.LFB140:
 130:user/Src/mpu9250.c ****   u8 buf[6], res;
 324              		.loc 1 130 59 is_stmt 1 view -0
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 8
 327              		@ frame_needed = 0, uses_anonymous_args = 0
 130:user/Src/mpu9250.c ****   u8 buf[6], res;
 328              		.loc 1 130 59 is_stmt 0 view .LVU70
 329 0000 70B5     		push	{r4, r5, r6, lr}
 330              	.LCFI12:
 331              		.cfi_def_cfa_offset 16
 332              		.cfi_offset 4, -16
 333              		.cfi_offset 5, -12
 334              		.cfi_offset 6, -8
 335              		.cfi_offset 14, -4
 336 0002 82B0     		sub	sp, sp, #8
 337              	.LCFI13:
 338              		.cfi_def_cfa_offset 24
 339 0004 0646     		mov	r6, r0
 340 0006 0D46     		mov	r5, r1
 341 0008 1446     		mov	r4, r2
 131:user/Src/mpu9250.c ****   res = MPU_Read_Len(MPU9250_ADDR, MPU_ACCEL_XOUTH_REG, 6, buf);
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 11


 342              		.loc 1 131 3 is_stmt 1 view .LVU71
 132:user/Src/mpu9250.c ****   if (res == 0) {
 343              		.loc 1 132 3 view .LVU72
 132:user/Src/mpu9250.c ****   if (res == 0) {
 344              		.loc 1 132 9 is_stmt 0 view .LVU73
 345 000a 6B46     		mov	r3, sp
 346 000c 0622     		movs	r2, #6
 347              	.LVL28:
 132:user/Src/mpu9250.c ****   if (res == 0) {
 348              		.loc 1 132 9 view .LVU74
 349 000e 3B21     		movs	r1, #59
 350              	.LVL29:
 132:user/Src/mpu9250.c ****   if (res == 0) {
 351              		.loc 1 132 9 view .LVU75
 352 0010 6820     		movs	r0, #104
 353              	.LVL30:
 132:user/Src/mpu9250.c ****   if (res == 0) {
 354              		.loc 1 132 9 view .LVU76
 355 0012 FFF7FEFF 		bl	MPU_Read_Len
 356              	.LVL31:
 133:user/Src/mpu9250.c ****     *ax = ((u16)buf[0] << 8) | buf[1];
 357              		.loc 1 133 3 is_stmt 1 view .LVU77
 133:user/Src/mpu9250.c ****     *ax = ((u16)buf[0] << 8) | buf[1];
 358              		.loc 1 133 6 is_stmt 0 view .LVU78
 359 0016 A0B9     		cbnz	r0, .L17
 134:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 360              		.loc 1 134 5 is_stmt 1 view .LVU79
 134:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 361              		.loc 1 134 20 is_stmt 0 view .LVU80
 362 0018 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 134:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 363              		.loc 1 134 35 view .LVU81
 364 001c 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 134:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 365              		.loc 1 134 30 view .LVU82
 366 0020 43EA0223 		orr	r3, r3, r2, lsl #8
 134:user/Src/mpu9250.c ****     *ay = ((u16)buf[2] << 8) | buf[3];
 367              		.loc 1 134 9 view .LVU83
 368 0024 3380     		strh	r3, [r6]	@ movhi
 135:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 369              		.loc 1 135 5 is_stmt 1 view .LVU84
 135:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 370              		.loc 1 135 20 is_stmt 0 view .LVU85
 371 0026 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 135:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 372              		.loc 1 135 35 view .LVU86
 373 002a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 135:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 374              		.loc 1 135 30 view .LVU87
 375 002e 43EA0223 		orr	r3, r3, r2, lsl #8
 135:user/Src/mpu9250.c ****     *az = ((u16)buf[4] << 8) | buf[5];
 376              		.loc 1 135 9 view .LVU88
 377 0032 2B80     		strh	r3, [r5]	@ movhi
 136:user/Src/mpu9250.c ****   }
 378              		.loc 1 136 5 is_stmt 1 view .LVU89
 136:user/Src/mpu9250.c ****   }
 379              		.loc 1 136 20 is_stmt 0 view .LVU90
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 12


 380 0034 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 136:user/Src/mpu9250.c ****   }
 381              		.loc 1 136 35 view .LVU91
 382 0038 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 136:user/Src/mpu9250.c ****   }
 383              		.loc 1 136 30 view .LVU92
 384 003c 43EA0223 		orr	r3, r3, r2, lsl #8
 136:user/Src/mpu9250.c ****   }
 385              		.loc 1 136 9 view .LVU93
 386 0040 2380     		strh	r3, [r4]	@ movhi
 387              	.L17:
 138:user/Src/mpu9250.c ****   ;
 388              		.loc 1 138 3 is_stmt 1 view .LVU94
 139:user/Src/mpu9250.c **** }
 389              		.loc 1 139 3 view .LVU95
 140:user/Src/mpu9250.c **** 
 390              		.loc 1 140 1 is_stmt 0 view .LVU96
 391 0042 02B0     		add	sp, sp, #8
 392              	.LCFI14:
 393              		.cfi_def_cfa_offset 16
 394              	.LVL32:
 140:user/Src/mpu9250.c **** 
 395              		.loc 1 140 1 view .LVU97
 396              		@ sp needed
 397 0044 70BD     		pop	{r4, r5, r6, pc}
 140:user/Src/mpu9250.c **** 
 398              		.loc 1 140 1 view .LVU98
 399              		.cfi_endproc
 400              	.LFE140:
 402              		.section	.text.MPU_Write_Byte,"ax",%progbits
 403              		.align	1
 404              		.global	MPU_Write_Byte
 405              		.syntax unified
 406              		.thumb
 407              		.thumb_func
 409              	MPU_Write_Byte:
 410              	.LVL33:
 411              	.LFB144:
 185:user/Src/mpu9250.c **** 
 186:user/Src/mpu9250.c **** // IIC写一个字节
 187:user/Src/mpu9250.c **** // devaddr:器件IIC地址
 188:user/Src/mpu9250.c **** // reg:寄存器地址
 189:user/Src/mpu9250.c **** // data:数据
 190:user/Src/mpu9250.c **** // 返回值:0,正常
 191:user/Src/mpu9250.c **** //     其他,错误代码
 192:user/Src/mpu9250.c **** u8 MPU_Write_Byte(u8 addr, u8 reg, u8 data) {
 412              		.loc 1 192 45 is_stmt 1 view -0
 413              		.cfi_startproc
 414              		@ args = 0, pretend = 0, frame = 8
 415              		@ frame_needed = 0, uses_anonymous_args = 0
 416              		.loc 1 192 45 is_stmt 0 view .LVU100
 417 0000 00B5     		push	{lr}
 418              	.LCFI15:
 419              		.cfi_def_cfa_offset 4
 420              		.cfi_offset 14, -4
 421 0002 87B0     		sub	sp, sp, #28
 422              	.LCFI16:
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 13


 423              		.cfi_def_cfa_offset 32
 424 0004 8DF81720 		strb	r2, [sp, #23]
 193:user/Src/mpu9250.c ****   HAL_I2C_Mem_Write(&hi2c1, (addr << 1), reg, I2C_MEMADD_SIZE_8BIT, &data, 1,
 425              		.loc 1 193 3 is_stmt 1 view .LVU101
 426 0008 40F6FF73 		movw	r3, #4095
 427 000c 0293     		str	r3, [sp, #8]
 428 000e 0123     		movs	r3, #1
 429 0010 0193     		str	r3, [sp, #4]
 430 0012 0DF11702 		add	r2, sp, #23
 431              	.LVL34:
 432              		.loc 1 193 3 is_stmt 0 view .LVU102
 433 0016 0092     		str	r2, [sp]
 434 0018 0A46     		mov	r2, r1
 435              	.LVL35:
 436              		.loc 1 193 3 view .LVU103
 437 001a 00FA03F1 		lsl	r1, r0, r3
 438              	.LVL36:
 439              		.loc 1 193 3 view .LVU104
 440 001e 0348     		ldr	r0, .L21
 441              	.LVL37:
 442              		.loc 1 193 3 view .LVU105
 443 0020 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 444              	.LVL38:
 194:user/Src/mpu9250.c ****                     0xfff);
 195:user/Src/mpu9250.c ****   return 0;
 445              		.loc 1 195 3 is_stmt 1 view .LVU106
 196:user/Src/mpu9250.c **** }
 446              		.loc 1 196 1 is_stmt 0 view .LVU107
 447 0024 0020     		movs	r0, #0
 448 0026 07B0     		add	sp, sp, #28
 449              	.LCFI17:
 450              		.cfi_def_cfa_offset 4
 451              		@ sp needed
 452 0028 5DF804FB 		ldr	pc, [sp], #4
 453              	.L22:
 454              		.align	2
 455              	.L21:
 456 002c 00000000 		.word	hi2c1
 457              		.cfi_endproc
 458              	.LFE144:
 460              		.section	.text.MPU_Set_Gyro_Fsr,"ax",%progbits
 461              		.align	1
 462              		.global	MPU_Set_Gyro_Fsr
 463              		.syntax unified
 464              		.thumb
 465              		.thumb_func
 467              	MPU_Set_Gyro_Fsr:
 468              	.LVL39:
 469              	.LFB134:
  49:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_GYRO_CFG_REG,
 470              		.loc 1 49 29 is_stmt 1 view -0
 471              		.cfi_startproc
 472              		@ args = 0, pretend = 0, frame = 0
 473              		@ frame_needed = 0, uses_anonymous_args = 0
  49:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_GYRO_CFG_REG,
 474              		.loc 1 49 29 is_stmt 0 view .LVU109
 475 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 14


 476              	.LCFI18:
 477              		.cfi_def_cfa_offset 8
 478              		.cfi_offset 3, -8
 479              		.cfi_offset 14, -4
  50:user/Src/mpu9250.c ****                         fsr << 3); // 设置陀螺仪满量程范围
 480              		.loc 1 50 3 is_stmt 1 view .LVU110
  50:user/Src/mpu9250.c ****                         fsr << 3); // 设置陀螺仪满量程范围
 481              		.loc 1 50 10 is_stmt 0 view .LVU111
 482 0002 C200     		lsls	r2, r0, #3
 483 0004 02F0F802 		and	r2, r2, #248
 484 0008 1B21     		movs	r1, #27
 485 000a 6820     		movs	r0, #104
 486              	.LVL40:
  50:user/Src/mpu9250.c ****                         fsr << 3); // 设置陀螺仪满量程范围
 487              		.loc 1 50 10 view .LVU112
 488 000c FFF7FEFF 		bl	MPU_Write_Byte
 489              	.LVL41:
  52:user/Src/mpu9250.c **** // 设置MPU9250加速度传感器满量程范围
 490              		.loc 1 52 1 view .LVU113
 491 0010 08BD     		pop	{r3, pc}
 492              		.cfi_endproc
 493              	.LFE134:
 495              		.section	.text.MPU_Set_Accel_Fsr,"ax",%progbits
 496              		.align	1
 497              		.global	MPU_Set_Accel_Fsr
 498              		.syntax unified
 499              		.thumb
 500              		.thumb_func
 502              	MPU_Set_Accel_Fsr:
 503              	.LVL42:
 504              	.LFB135:
  57:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_ACCEL_CFG_REG,
 505              		.loc 1 57 30 is_stmt 1 view -0
 506              		.cfi_startproc
 507              		@ args = 0, pretend = 0, frame = 0
 508              		@ frame_needed = 0, uses_anonymous_args = 0
  57:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_ACCEL_CFG_REG,
 509              		.loc 1 57 30 is_stmt 0 view .LVU115
 510 0000 08B5     		push	{r3, lr}
 511              	.LCFI19:
 512              		.cfi_def_cfa_offset 8
 513              		.cfi_offset 3, -8
 514              		.cfi_offset 14, -4
  58:user/Src/mpu9250.c ****                         fsr << 3); // 设置加速度传感器满量程范围
 515              		.loc 1 58 3 is_stmt 1 view .LVU116
  58:user/Src/mpu9250.c ****                         fsr << 3); // 设置加速度传感器满量程范围
 516              		.loc 1 58 10 is_stmt 0 view .LVU117
 517 0002 C200     		lsls	r2, r0, #3
 518 0004 02F0F802 		and	r2, r2, #248
 519 0008 1C21     		movs	r1, #28
 520 000a 6820     		movs	r0, #104
 521              	.LVL43:
  58:user/Src/mpu9250.c ****                         fsr << 3); // 设置加速度传感器满量程范围
 522              		.loc 1 58 10 view .LVU118
 523 000c FFF7FEFF 		bl	MPU_Write_Byte
 524              	.LVL44:
  60:user/Src/mpu9250.c **** 
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 15


 525              		.loc 1 60 1 view .LVU119
 526 0010 08BD     		pop	{r3, pc}
 527              		.cfi_endproc
 528              	.LFE135:
 530              		.section	.text.MPU_Set_LPF,"ax",%progbits
 531              		.align	1
 532              		.global	MPU_Set_LPF
 533              		.syntax unified
 534              		.thumb
 535              		.thumb_func
 537              	MPU_Set_LPF:
 538              	.LVL45:
 539              	.LFB136:
  66:user/Src/mpu9250.c ****   u8 data = 0;
 540              		.loc 1 66 25 is_stmt 1 view -0
 541              		.cfi_startproc
 542              		@ args = 0, pretend = 0, frame = 0
 543              		@ frame_needed = 0, uses_anonymous_args = 0
  66:user/Src/mpu9250.c ****   u8 data = 0;
 544              		.loc 1 66 25 is_stmt 0 view .LVU121
 545 0000 08B5     		push	{r3, lr}
 546              	.LCFI20:
 547              		.cfi_def_cfa_offset 8
 548              		.cfi_offset 3, -8
 549              		.cfi_offset 14, -4
  67:user/Src/mpu9250.c ****   if (lpf >= 188)
 550              		.loc 1 67 3 is_stmt 1 view .LVU122
 551              	.LVL46:
  68:user/Src/mpu9250.c ****     data = 1;
 552              		.loc 1 68 3 view .LVU123
  68:user/Src/mpu9250.c ****     data = 1;
 553              		.loc 1 68 6 is_stmt 0 view .LVU124
 554 0002 BB28     		cmp	r0, #187
 555 0004 09D8     		bhi	.L29
  70:user/Src/mpu9250.c ****     data = 2;
 556              		.loc 1 70 8 is_stmt 1 view .LVU125
  70:user/Src/mpu9250.c ****     data = 2;
 557              		.loc 1 70 11 is_stmt 0 view .LVU126
 558 0006 6128     		cmp	r0, #97
 559 0008 0DD8     		bhi	.L30
  72:user/Src/mpu9250.c ****     data = 3;
 560              		.loc 1 72 8 is_stmt 1 view .LVU127
  72:user/Src/mpu9250.c ****     data = 3;
 561              		.loc 1 72 11 is_stmt 0 view .LVU128
 562 000a 2928     		cmp	r0, #41
 563 000c 0DD8     		bhi	.L31
  74:user/Src/mpu9250.c ****     data = 4;
 564              		.loc 1 74 8 is_stmt 1 view .LVU129
  74:user/Src/mpu9250.c ****     data = 4;
 565              		.loc 1 74 11 is_stmt 0 view .LVU130
 566 000e 1328     		cmp	r0, #19
 567 0010 0DD8     		bhi	.L32
  76:user/Src/mpu9250.c ****     data = 5;
 568              		.loc 1 76 8 is_stmt 1 view .LVU131
  76:user/Src/mpu9250.c ****     data = 5;
 569              		.loc 1 76 11 is_stmt 0 view .LVU132
 570 0012 0928     		cmp	r0, #9
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 16


 571 0014 0DD9     		bls	.L33
  77:user/Src/mpu9250.c ****   else
 572              		.loc 1 77 10 view .LVU133
 573 0016 0522     		movs	r2, #5
 574 0018 00E0     		b	.L28
 575              	.L29:
  69:user/Src/mpu9250.c ****   else if (lpf >= 98)
 576              		.loc 1 69 10 view .LVU134
 577 001a 0122     		movs	r2, #1
 578              	.L28:
 579              	.LVL47:
  80:user/Src/mpu9250.c **** }
 580              		.loc 1 80 3 is_stmt 1 view .LVU135
  80:user/Src/mpu9250.c **** }
 581              		.loc 1 80 10 is_stmt 0 view .LVU136
 582 001c 1A21     		movs	r1, #26
 583 001e 6820     		movs	r0, #104
 584              	.LVL48:
  80:user/Src/mpu9250.c **** }
 585              		.loc 1 80 10 view .LVU137
 586 0020 FFF7FEFF 		bl	MPU_Write_Byte
 587              	.LVL49:
  81:user/Src/mpu9250.c **** 
 588              		.loc 1 81 1 view .LVU138
 589 0024 08BD     		pop	{r3, pc}
 590              	.LVL50:
 591              	.L30:
  71:user/Src/mpu9250.c ****   else if (lpf >= 42)
 592              		.loc 1 71 10 view .LVU139
 593 0026 0222     		movs	r2, #2
 594 0028 F8E7     		b	.L28
 595              	.L31:
  73:user/Src/mpu9250.c ****   else if (lpf >= 20)
 596              		.loc 1 73 10 view .LVU140
 597 002a 0322     		movs	r2, #3
 598 002c F6E7     		b	.L28
 599              	.L32:
  75:user/Src/mpu9250.c ****   else if (lpf >= 10)
 600              		.loc 1 75 10 view .LVU141
 601 002e 0422     		movs	r2, #4
 602 0030 F4E7     		b	.L28
 603              	.L33:
  79:user/Src/mpu9250.c ****   return MPU_Write_Byte(MPU9250_ADDR, MPU_CFG_REG, data); // 设置数字低通滤波器
 604              		.loc 1 79 10 view .LVU142
 605 0032 0622     		movs	r2, #6
 606 0034 F2E7     		b	.L28
 607              		.cfi_endproc
 608              	.LFE136:
 610              		.section	.text.MPU_Set_Rate,"ax",%progbits
 611              		.align	1
 612              		.global	MPU_Set_Rate
 613              		.syntax unified
 614              		.thumb
 615              		.thumb_func
 617              	MPU_Set_Rate:
 618              	.LVL51:
 619              	.LFB137:
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 17


  87:user/Src/mpu9250.c ****   u8 data;
 620              		.loc 1 87 27 is_stmt 1 view -0
 621              		.cfi_startproc
 622              		@ args = 0, pretend = 0, frame = 0
 623              		@ frame_needed = 0, uses_anonymous_args = 0
  87:user/Src/mpu9250.c ****   u8 data;
 624              		.loc 1 87 27 is_stmt 0 view .LVU144
 625 0000 10B5     		push	{r4, lr}
 626              	.LCFI21:
 627              		.cfi_def_cfa_offset 8
 628              		.cfi_offset 4, -8
 629              		.cfi_offset 14, -4
  88:user/Src/mpu9250.c ****   if (rate > 1000)
 630              		.loc 1 88 3 is_stmt 1 view .LVU145
  89:user/Src/mpu9250.c ****     rate = 1000;
 631              		.loc 1 89 3 view .LVU146
  89:user/Src/mpu9250.c ****     rate = 1000;
 632              		.loc 1 89 6 is_stmt 0 view .LVU147
 633 0002 B0F57A7F 		cmp	r0, #1000
 634 0006 04D8     		bhi	.L37
 635 0008 0446     		mov	r4, r0
  91:user/Src/mpu9250.c ****     rate = 4;
 636              		.loc 1 91 3 is_stmt 1 view .LVU148
  91:user/Src/mpu9250.c ****     rate = 4;
 637              		.loc 1 91 6 is_stmt 0 view .LVU149
 638 000a 0328     		cmp	r0, #3
 639 000c 03D8     		bhi	.L36
  92:user/Src/mpu9250.c ****   data = 1000 / rate - 1;
 640              		.loc 1 92 10 view .LVU150
 641 000e 0424     		movs	r4, #4
 642 0010 01E0     		b	.L36
 643              	.L37:
  90:user/Src/mpu9250.c ****   if (rate < 4)
 644              		.loc 1 90 10 view .LVU151
 645 0012 4FF47A74 		mov	r4, #1000
 646              	.L36:
 647              	.LVL52:
  93:user/Src/mpu9250.c ****   data = MPU_Write_Byte(MPU9250_ADDR, MPU_SAMPLE_RATE_REG,
 648              		.loc 1 93 3 is_stmt 1 view .LVU152
  93:user/Src/mpu9250.c ****   data = MPU_Write_Byte(MPU9250_ADDR, MPU_SAMPLE_RATE_REG,
 649              		.loc 1 93 15 is_stmt 0 view .LVU153
 650 0016 4FF47A72 		mov	r2, #1000
 651 001a 92FBF4F2 		sdiv	r2, r2, r4
  93:user/Src/mpu9250.c ****   data = MPU_Write_Byte(MPU9250_ADDR, MPU_SAMPLE_RATE_REG,
 652              		.loc 1 93 22 view .LVU154
 653 001e D2B2     		uxtb	r2, r2
  93:user/Src/mpu9250.c ****   data = MPU_Write_Byte(MPU9250_ADDR, MPU_SAMPLE_RATE_REG,
 654              		.loc 1 93 8 view .LVU155
 655 0020 013A     		subs	r2, r2, #1
 656              	.LVL53:
  94:user/Src/mpu9250.c ****                         data);  // 设置数字低通滤波器
 657              		.loc 1 94 3 is_stmt 1 view .LVU156
  94:user/Src/mpu9250.c ****                         data);  // 设置数字低通滤波器
 658              		.loc 1 94 10 is_stmt 0 view .LVU157
 659 0022 D2B2     		uxtb	r2, r2
  94:user/Src/mpu9250.c ****                         data);  // 设置数字低通滤波器
 660              		.loc 1 94 10 view .LVU158
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 18


 661 0024 1921     		movs	r1, #25
 662 0026 6820     		movs	r0, #104
 663 0028 FFF7FEFF 		bl	MPU_Write_Byte
 664              	.LVL54:
  96:user/Src/mpu9250.c **** }
 665              		.loc 1 96 3 is_stmt 1 view .LVU159
  96:user/Src/mpu9250.c **** }
 666              		.loc 1 96 10 is_stmt 0 view .LVU160
 667 002c 6008     		lsrs	r0, r4, #1
 668 002e FFF7FEFF 		bl	MPU_Set_LPF
 669              	.LVL55:
  97:user/Src/mpu9250.c **** 
 670              		.loc 1 97 1 view .LVU161
 671 0032 10BD     		pop	{r4, pc}
  97:user/Src/mpu9250.c **** 
 672              		.loc 1 97 1 view .LVU162
 673              		.cfi_endproc
 674              	.LFE137:
 676              		.section	.text.MPU_Get_Magnetometer,"ax",%progbits
 677              		.align	1
 678              		.global	MPU_Get_Magnetometer
 679              		.syntax unified
 680              		.thumb
 681              		.thumb_func
 683              	MPU_Get_Magnetometer:
 684              	.LVL56:
 685              	.LFB141:
 146:user/Src/mpu9250.c ****   u8 buf[6], res;
 686              		.loc 1 146 58 is_stmt 1 view -0
 687              		.cfi_startproc
 688              		@ args = 0, pretend = 0, frame = 8
 689              		@ frame_needed = 0, uses_anonymous_args = 0
 146:user/Src/mpu9250.c ****   u8 buf[6], res;
 690              		.loc 1 146 58 is_stmt 0 view .LVU164
 691 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 692              	.LCFI22:
 693              		.cfi_def_cfa_offset 20
 694              		.cfi_offset 4, -20
 695              		.cfi_offset 5, -16
 696              		.cfi_offset 6, -12
 697              		.cfi_offset 7, -8
 698              		.cfi_offset 14, -4
 699 0002 83B0     		sub	sp, sp, #12
 700              	.LCFI23:
 701              		.cfi_def_cfa_offset 32
 702 0004 0646     		mov	r6, r0
 703 0006 0D46     		mov	r5, r1
 704 0008 1446     		mov	r4, r2
 147:user/Src/mpu9250.c ****   res = MPU_Read_Len(AK8963_ADDR, MAG_XOUT_L, 6, buf);
 705              		.loc 1 147 3 is_stmt 1 view .LVU165
 148:user/Src/mpu9250.c ****   if (res == 0) {
 706              		.loc 1 148 3 view .LVU166
 148:user/Src/mpu9250.c ****   if (res == 0) {
 707              		.loc 1 148 9 is_stmt 0 view .LVU167
 708 000a 6B46     		mov	r3, sp
 709 000c 0622     		movs	r2, #6
 710              	.LVL57:
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 19


 148:user/Src/mpu9250.c ****   if (res == 0) {
 711              		.loc 1 148 9 view .LVU168
 712 000e 0321     		movs	r1, #3
 713              	.LVL58:
 148:user/Src/mpu9250.c ****   if (res == 0) {
 714              		.loc 1 148 9 view .LVU169
 715 0010 0C20     		movs	r0, #12
 716              	.LVL59:
 148:user/Src/mpu9250.c ****   if (res == 0) {
 717              		.loc 1 148 9 view .LVU170
 718 0012 FFF7FEFF 		bl	MPU_Read_Len
 719              	.LVL60:
 149:user/Src/mpu9250.c ****     *mx = ((u16)buf[1] << 8) | buf[0];
 720              		.loc 1 149 3 is_stmt 1 view .LVU171
 149:user/Src/mpu9250.c ****     *mx = ((u16)buf[1] << 8) | buf[0];
 721              		.loc 1 149 6 is_stmt 0 view .LVU172
 722 0016 0746     		mov	r7, r0
 723 0018 A0B9     		cbnz	r0, .L41
 150:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 724              		.loc 1 150 5 is_stmt 1 view .LVU173
 150:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 725              		.loc 1 150 20 is_stmt 0 view .LVU174
 726 001a 9DF80120 		ldrb	r2, [sp, #1]	@ zero_extendqisi2
 150:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 727              		.loc 1 150 35 view .LVU175
 728 001e 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 150:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 729              		.loc 1 150 30 view .LVU176
 730 0022 43EA0223 		orr	r3, r3, r2, lsl #8
 150:user/Src/mpu9250.c ****     *my = ((u16)buf[3] << 8) | buf[2];
 731              		.loc 1 150 9 view .LVU177
 732 0026 3380     		strh	r3, [r6]	@ movhi
 151:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 733              		.loc 1 151 5 is_stmt 1 view .LVU178
 151:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 734              		.loc 1 151 20 is_stmt 0 view .LVU179
 735 0028 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 151:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 736              		.loc 1 151 35 view .LVU180
 737 002c 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 151:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 738              		.loc 1 151 30 view .LVU181
 739 0030 43EA0223 		orr	r3, r3, r2, lsl #8
 151:user/Src/mpu9250.c ****     *mz = ((u16)buf[5] << 8) | buf[4];
 740              		.loc 1 151 9 view .LVU182
 741 0034 2B80     		strh	r3, [r5]	@ movhi
 152:user/Src/mpu9250.c ****   }
 742              		.loc 1 152 5 is_stmt 1 view .LVU183
 152:user/Src/mpu9250.c ****   }
 743              		.loc 1 152 20 is_stmt 0 view .LVU184
 744 0036 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 152:user/Src/mpu9250.c ****   }
 745              		.loc 1 152 35 view .LVU185
 746 003a 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 152:user/Src/mpu9250.c ****   }
 747              		.loc 1 152 30 view .LVU186
 748 003e 43EA0223 		orr	r3, r3, r2, lsl #8
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 20


 152:user/Src/mpu9250.c ****   }
 749              		.loc 1 152 9 view .LVU187
 750 0042 2380     		strh	r3, [r4]	@ movhi
 751              	.L41:
 154:user/Src/mpu9250.c ****                  0X11); // AK8963每次读完以后都需要重新设置为单次测量模式
 752              		.loc 1 154 3 is_stmt 1 view .LVU188
 753 0044 1122     		movs	r2, #17
 754 0046 0A21     		movs	r1, #10
 755 0048 0C20     		movs	r0, #12
 756              	.LVL61:
 154:user/Src/mpu9250.c ****                  0X11); // AK8963每次读完以后都需要重新设置为单次测量模式
 757              		.loc 1 154 3 is_stmt 0 view .LVU189
 758 004a FFF7FEFF 		bl	MPU_Write_Byte
 759              	.LVL62:
 156:user/Src/mpu9250.c ****   ;
 760              		.loc 1 156 3 is_stmt 1 view .LVU190
 157:user/Src/mpu9250.c **** }
 761              		.loc 1 157 3 view .LVU191
 158:user/Src/mpu9250.c **** 
 762              		.loc 1 158 1 is_stmt 0 view .LVU192
 763 004e 3846     		mov	r0, r7
 764 0050 03B0     		add	sp, sp, #12
 765              	.LCFI24:
 766              		.cfi_def_cfa_offset 20
 767              		@ sp needed
 768 0052 F0BD     		pop	{r4, r5, r6, r7, pc}
 158:user/Src/mpu9250.c **** 
 769              		.loc 1 158 1 view .LVU193
 770              		.cfi_endproc
 771              	.LFE141:
 773              		.section	.text.MPU_Read_Byte,"ax",%progbits
 774              		.align	1
 775              		.global	MPU_Read_Byte
 776              		.syntax unified
 777              		.thumb
 778              		.thumb_func
 780              	MPU_Read_Byte:
 781              	.LVL63:
 782              	.LFB145:
 197:user/Src/mpu9250.c **** 
 198:user/Src/mpu9250.c **** // IIC读一个字节
 199:user/Src/mpu9250.c **** // reg:寄存器地址
 200:user/Src/mpu9250.c **** // 返回值:读到的数据
 201:user/Src/mpu9250.c **** u8 MPU_Read_Byte(u8 addr, u8 reg) {
 783              		.loc 1 201 35 is_stmt 1 view -0
 784              		.cfi_startproc
 785              		@ args = 0, pretend = 0, frame = 8
 786              		@ frame_needed = 0, uses_anonymous_args = 0
 787              		.loc 1 201 35 is_stmt 0 view .LVU195
 788 0000 00B5     		push	{lr}
 789              	.LCFI25:
 790              		.cfi_def_cfa_offset 4
 791              		.cfi_offset 14, -4
 792 0002 87B0     		sub	sp, sp, #28
 793              	.LCFI26:
 794              		.cfi_def_cfa_offset 32
 795 0004 0A46     		mov	r2, r1
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 21


 202:user/Src/mpu9250.c ****   u8 res;
 796              		.loc 1 202 3 is_stmt 1 view .LVU196
 203:user/Src/mpu9250.c ****   HAL_I2C_Mem_Read(&hi2c1, (addr << 1), reg, I2C_MEMADD_SIZE_8BIT, &res, 1,
 797              		.loc 1 203 3 view .LVU197
 798 0006 40F6FF73 		movw	r3, #4095
 799 000a 0293     		str	r3, [sp, #8]
 800 000c 0123     		movs	r3, #1
 801 000e 0193     		str	r3, [sp, #4]
 802 0010 0DF11701 		add	r1, sp, #23
 803              	.LVL64:
 804              		.loc 1 203 3 is_stmt 0 view .LVU198
 805 0014 0091     		str	r1, [sp]
 806 0016 00FA03F1 		lsl	r1, r0, r3
 807 001a 0448     		ldr	r0, .L45
 808              	.LVL65:
 809              		.loc 1 203 3 view .LVU199
 810 001c FFF7FEFF 		bl	HAL_I2C_Mem_Read
 811              	.LVL66:
 204:user/Src/mpu9250.c ****                   0xfff);
 205:user/Src/mpu9250.c ****   return res;
 812              		.loc 1 205 3 is_stmt 1 view .LVU200
 206:user/Src/mpu9250.c **** }
 813              		.loc 1 206 1 is_stmt 0 view .LVU201
 814 0020 9DF81700 		ldrb	r0, [sp, #23]	@ zero_extendqisi2
 815 0024 07B0     		add	sp, sp, #28
 816              	.LCFI27:
 817              		.cfi_def_cfa_offset 4
 818              		@ sp needed
 819 0026 5DF804FB 		ldr	pc, [sp], #4
 820              	.L46:
 821 002a 00BF     		.align	2
 822              	.L45:
 823 002c 00000000 		.word	hi2c1
 824              		.cfi_endproc
 825              	.LFE145:
 827              		.section	.text.MPU9250_Init,"ax",%progbits
 828              		.align	1
 829              		.global	MPU9250_Init
 830              		.syntax unified
 831              		.thumb
 832              		.thumb_func
 834              	MPU9250_Init:
 835              	.LFB133:
  11:user/Src/mpu9250.c ****   u8 res = 0;
 836              		.loc 1 11 23 is_stmt 1 view -0
 837              		.cfi_startproc
 838              		@ args = 0, pretend = 0, frame = 0
 839              		@ frame_needed = 0, uses_anonymous_args = 0
 840 0000 08B5     		push	{r3, lr}
 841              	.LCFI28:
 842              		.cfi_def_cfa_offset 8
 843              		.cfi_offset 3, -8
 844              		.cfi_offset 14, -4
  12:user/Src/mpu9250.c ****   // IIC_Init();     //初始化IIC总线
 845              		.loc 1 12 3 view .LVU203
 846              	.LVL67:
  14:user/Src/mpu9250.c ****   HAL_Delay(100);                                        // 延时100ms
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 22


 847              		.loc 1 14 3 view .LVU204
 848 0002 8022     		movs	r2, #128
 849 0004 6B21     		movs	r1, #107
 850 0006 6820     		movs	r0, #104
 851 0008 FFF7FEFF 		bl	MPU_Write_Byte
 852              	.LVL68:
  15:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_PWR_MGMT1_REG, 0X00); // 唤醒MPU9250
 853              		.loc 1 15 3 view .LVU205
 854 000c 6420     		movs	r0, #100
 855 000e FFF7FEFF 		bl	HAL_Delay
 856              	.LVL69:
  16:user/Src/mpu9250.c ****   MPU_Set_Gyro_Fsr(3);  // 陀螺仪传感器,±2000dps
 857              		.loc 1 16 3 view .LVU206
 858 0012 0022     		movs	r2, #0
 859 0014 6B21     		movs	r1, #107
 860 0016 6820     		movs	r0, #104
 861 0018 FFF7FEFF 		bl	MPU_Write_Byte
 862              	.LVL70:
  17:user/Src/mpu9250.c ****   MPU_Set_Accel_Fsr(0); // 加速度传感器,±2g
 863              		.loc 1 17 3 view .LVU207
 864 001c 0320     		movs	r0, #3
 865 001e FFF7FEFF 		bl	MPU_Set_Gyro_Fsr
 866              	.LVL71:
  18:user/Src/mpu9250.c ****   MPU_Set_Rate(50);     // 设置采样率50Hz
 867              		.loc 1 18 3 view .LVU208
 868 0022 0020     		movs	r0, #0
 869 0024 FFF7FEFF 		bl	MPU_Set_Accel_Fsr
 870              	.LVL72:
  19:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_INT_EN_REG, 0X00);    // 关闭所有中断
 871              		.loc 1 19 3 view .LVU209
 872 0028 3220     		movs	r0, #50
 873 002a FFF7FEFF 		bl	MPU_Set_Rate
 874              	.LVL73:
  20:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_USER_CTRL_REG, 0X00); // I2C主模式关闭
 875              		.loc 1 20 3 view .LVU210
 876 002e 0022     		movs	r2, #0
 877 0030 3821     		movs	r1, #56
 878 0032 6820     		movs	r0, #104
 879 0034 FFF7FEFF 		bl	MPU_Write_Byte
 880              	.LVL74:
  21:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_FIFO_EN_REG, 0X00);   // 关闭FIFO
 881              		.loc 1 21 3 view .LVU211
 882 0038 0022     		movs	r2, #0
 883 003a 6A21     		movs	r1, #106
 884 003c 6820     		movs	r0, #104
 885 003e FFF7FEFF 		bl	MPU_Write_Byte
 886              	.LVL75:
  22:user/Src/mpu9250.c ****   MPU_Write_Byte(MPU9250_ADDR, MPU_INTBP_CFG_REG,
 887              		.loc 1 22 3 view .LVU212
 888 0042 0022     		movs	r2, #0
 889 0044 2321     		movs	r1, #35
 890 0046 6820     		movs	r0, #104
 891 0048 FFF7FEFF 		bl	MPU_Write_Byte
 892              	.LVL76:
  23:user/Src/mpu9250.c ****                  0X82); // INT引脚低电平有效，开启bypass模式，可以直接读取磁力
 893              		.loc 1 23 3 view .LVU213
 894 004c 8222     		movs	r2, #130
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 23


 895 004e 3721     		movs	r1, #55
 896 0050 6820     		movs	r0, #104
 897 0052 FFF7FEFF 		bl	MPU_Write_Byte
 898              	.LVL77:
  25:user/Src/mpu9250.c ****   if (res == MPU6500_ID)                                // 器件ID正确
 899              		.loc 1 25 3 view .LVU214
  25:user/Src/mpu9250.c ****   if (res == MPU6500_ID)                                // 器件ID正确
 900              		.loc 1 25 9 is_stmt 0 view .LVU215
 901 0056 7521     		movs	r1, #117
 902 0058 6820     		movs	r0, #104
 903 005a FFF7FEFF 		bl	MPU_Read_Byte
 904              	.LVL78:
  26:user/Src/mpu9250.c ****   {
 905              		.loc 1 26 3 is_stmt 1 view .LVU216
  26:user/Src/mpu9250.c ****   {
 906              		.loc 1 26 6 is_stmt 0 view .LVU217
 907 005e 7128     		cmp	r0, #113
 908 0060 01D0     		beq	.L52
  34:user/Src/mpu9250.c **** 
 909              		.loc 1 34 12 view .LVU218
 910 0062 0120     		movs	r0, #1
 911              	.LVL79:
 912              	.L48:
  43:user/Src/mpu9250.c **** 
 913              		.loc 1 43 1 view .LVU219
 914 0064 08BD     		pop	{r3, pc}
 915              	.LVL80:
 916              	.L52:
  28:user/Src/mpu9250.c ****                    0X01); // 设置CLKSEL,PLL X轴为参考
 917              		.loc 1 28 5 is_stmt 1 view .LVU220
 918 0066 0122     		movs	r2, #1
 919 0068 6B21     		movs	r1, #107
 920 006a 6820     		movs	r0, #104
 921              	.LVL81:
  28:user/Src/mpu9250.c ****                    0X01); // 设置CLKSEL,PLL X轴为参考
 922              		.loc 1 28 5 is_stmt 0 view .LVU221
 923 006c FFF7FEFF 		bl	MPU_Write_Byte
 924              	.LVL82:
  30:user/Src/mpu9250.c ****                    0X00); // 加速度与陀螺仪都工作
 925              		.loc 1 30 5 is_stmt 1 view .LVU222
 926 0070 0022     		movs	r2, #0
 927 0072 6C21     		movs	r1, #108
 928 0074 6820     		movs	r0, #104
 929 0076 FFF7FEFF 		bl	MPU_Write_Byte
 930              	.LVL83:
  32:user/Src/mpu9250.c ****   } else
 931              		.loc 1 32 5 view .LVU223
 932 007a 3220     		movs	r0, #50
 933 007c FFF7FEFF 		bl	MPU_Set_Rate
 934              	.LVL84:
  36:user/Src/mpu9250.c ****   if (res == AK8963_ID) {
 935              		.loc 1 36 3 view .LVU224
  36:user/Src/mpu9250.c ****   if (res == AK8963_ID) {
 936              		.loc 1 36 9 is_stmt 0 view .LVU225
 937 0080 0021     		movs	r1, #0
 938 0082 0C20     		movs	r0, #12
 939 0084 FFF7FEFF 		bl	MPU_Read_Byte
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 24


 940              	.LVL85:
  37:user/Src/mpu9250.c ****     MPU_Write_Byte(AK8963_ADDR, MAG_CNTL1, 0X11); // 设置AK8963为单次测量模式
 941              		.loc 1 37 3 is_stmt 1 view .LVU226
  37:user/Src/mpu9250.c ****     MPU_Write_Byte(AK8963_ADDR, MAG_CNTL1, 0X11); // 设置AK8963为单次测量模式
 942              		.loc 1 37 6 is_stmt 0 view .LVU227
 943 0088 4828     		cmp	r0, #72
 944 008a 01D0     		beq	.L53
  40:user/Src/mpu9250.c **** 
 945              		.loc 1 40 12 view .LVU228
 946 008c 0120     		movs	r0, #1
 947              	.LVL86:
  40:user/Src/mpu9250.c **** 
 948              		.loc 1 40 12 view .LVU229
 949 008e E9E7     		b	.L48
 950              	.LVL87:
 951              	.L53:
  38:user/Src/mpu9250.c ****   } else
 952              		.loc 1 38 5 is_stmt 1 view .LVU230
 953 0090 1122     		movs	r2, #17
 954 0092 0A21     		movs	r1, #10
 955 0094 0C20     		movs	r0, #12
 956              	.LVL88:
  38:user/Src/mpu9250.c ****   } else
 957              		.loc 1 38 5 is_stmt 0 view .LVU231
 958 0096 FFF7FEFF 		bl	MPU_Write_Byte
 959              	.LVL89:
  42:user/Src/mpu9250.c **** }
 960              		.loc 1 42 3 is_stmt 1 view .LVU232
  42:user/Src/mpu9250.c **** }
 961              		.loc 1 42 10 is_stmt 0 view .LVU233
 962 009a 0020     		movs	r0, #0
 963 009c E2E7     		b	.L48
 964              		.cfi_endproc
 965              	.LFE133:
 967              		.text
 968              	.Letext0:
 969              		.file 2 "/usr/local/include/_types/_uint8_t.h"
 970              		.file 3 "/usr/local/include/_types/_uint16_t.h"
 971              		.file 4 "/usr/local/include/_types/_uint32_t.h"
 972              		.file 5 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g474xx.h"
 973              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 974              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 975              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_i2c.h"
 976              		.file 9 "user/Inc/mpu9250.h"
 977              		.file 10 "Core/Inc/i2c.h"
 978              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
ARM GAS  /var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s 			page 25


DEFINED SYMBOLS
                            *ABS*:00000000 mpu9250.c
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:21     .text.MPU_Write_Len:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:27     .text.MPU_Write_Len:00000000 MPU_Write_Len
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:73     .text.MPU_Write_Len:00000024 $d
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:78     .text.MPU_Read_Len:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:84     .text.MPU_Read_Len:00000000 MPU_Read_Len
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:130    .text.MPU_Read_Len:00000024 $d
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:139    .text.MPU_Get_Temperature:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:145    .text.MPU_Get_Temperature:00000000 MPU_Get_Temperature
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:219    .text.MPU_Get_Temperature:00000058 $d
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:227    .text.MPU_Get_Gyroscope:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:233    .text.MPU_Get_Gyroscope:00000000 MPU_Get_Gyroscope
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:315    .text.MPU_Get_Accelerometer:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:321    .text.MPU_Get_Accelerometer:00000000 MPU_Get_Accelerometer
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:403    .text.MPU_Write_Byte:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:409    .text.MPU_Write_Byte:00000000 MPU_Write_Byte
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:456    .text.MPU_Write_Byte:0000002c $d
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:461    .text.MPU_Set_Gyro_Fsr:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:467    .text.MPU_Set_Gyro_Fsr:00000000 MPU_Set_Gyro_Fsr
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:496    .text.MPU_Set_Accel_Fsr:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:502    .text.MPU_Set_Accel_Fsr:00000000 MPU_Set_Accel_Fsr
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:531    .text.MPU_Set_LPF:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:537    .text.MPU_Set_LPF:00000000 MPU_Set_LPF
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:611    .text.MPU_Set_Rate:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:617    .text.MPU_Set_Rate:00000000 MPU_Set_Rate
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:677    .text.MPU_Get_Magnetometer:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:683    .text.MPU_Get_Magnetometer:00000000 MPU_Get_Magnetometer
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:774    .text.MPU_Read_Byte:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:780    .text.MPU_Read_Byte:00000000 MPU_Read_Byte
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:823    .text.MPU_Read_Byte:0000002c $d
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:828    .text.MPU9250_Init:00000000 $t
/var/folders/21/t9g5rlb91ys800n5npymflf80000gn/T//ccJsj2dM.s:834    .text.MPU9250_Init:00000000 MPU9250_Init

UNDEFINED SYMBOLS
HAL_I2C_Mem_Write
hi2c1
HAL_I2C_Mem_Read
__aeabi_i2d
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2f
HAL_Delay
